****** CREACION DE IMAGEN DE ORACLE DENTRO DE DOCKER ******

1. Primero ons loggeamos con docker dentro de Oracle
    docker login https://container-registry.oracle.com/
    Username: fdx.soft.mx@gmail.com
    Password: OJO Tengo que solicitar el token en la pagina

2. Una vez firmados procedemos a instalar la imagen de Oracle en  nuestro Docker:
    docker pull container-registry.oracle.com/database/express:latest

3. Ya que termino de instalar la imagen, ahora si podemos ejecutar contenedores de Oracle con el comando:
    docker run -d --name oracle-db -p 1521:1521 -p 5500:5500 -e ORACLE_PWD=secret container-registry.oracle.com/database/express:21.3.0-xe

4. Revisamos que este corriendo con el siguiente comando:
    docker ps -a

5. Ahora revisamos el log de nuestro contenedor generado con: 
    docker logs oracle-db

6. Finalemente nos metemos dentro del contenedor
    docker exec -it oracle-db bash
   Y luego ejecutamos los sguientes comandos:
    a) sqlplus system/secret                *** NOTA: secret es la password que le establecimos a la hora de crear el contenedor
       Para lo cual nos debe aparecer lo siguiente para saber que estamos ya conectados a la BD con el usuario system:
            SQL*Plus: Release 21.0.0.0.0 - Production on Tue Sep 2 21:48:37 2025
            Version 21.3.0.0.0
            
            Copyright (c) 1982, 2021, Oracle.  All rights reserved.
            
            Last Successful login time: Tue Sep 02 2025 21:21:58 +00:00
            
            Connected to:
            Oracle Database 21c Express Edition Release 21.0.0.0.0 - Production
            Version 21.3.0.0.0
            
            SQL> 
    b) Otra opcion para conectarse es:
        sqlplus /nolog
        luego ejecutar el comando:
        CONNECT sys/secret AS SYSDBA;

    Si no arroja error en alguna de las dos opciones, quiere decir que nuestro server de Oracle esta correcto.


7. Comando para saber en que PDB estamos conectados:
    SQL> SHOW CON_NAME;

8. Como cambiarnos al PDB deseado o correcto:
    ALTER SESSION SET CONTAINER = XEPDB1;

9. Comandos para crear un usuario nuevo:
    CREATE USER miusuario IDENTIFIED BY mipassword;
    GRANT CONNECT, RESOURCE TO miusuario;

    NOTA: miusuario será local solo en XEPDB1

10. Ahora nos conectamos con nuestro usuario:
    CONNECT miusuario/mipassword;
    NOTA: Hay que salirse primero de la sesion anterior.
    
    De hecho te puedes salir de Oracle y volver a entrar con este comando:
        sqlplus system/<TU_PASSWORD>@//localhost:1521/xepdb1

11. Comando para entrar directo como SYS, saltándote el problema de credenciales.
        sqlplus / as sysdba

12. Comando para revisar que usuario SYS y miusuario esten desbloqueados:
        SELECT username, account_status FROM dba_users WHERE username IN ('SYS','MIUSUARIO');

13. Cambiarle la contrasenia a mi usuario y desbloquearlo:
        ALTER USER miusuario IDENTIFIED BY calibre3006 ACCOUNT UNLOCK

14. Comando para crear una tabla dentro de mi usuario:
        CREATE TABLE clientes (
            id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
            nombre VARCHAR2(100),
            correo VARCHAR2(100),
            fecha_registro DATE DEFAULT SYSDATE
        );

15. Como saber cual es el usuario actual en la sesion:
        SHOW USER;

16. Comando para ver las tablas que tengo dadas de alta par ami usuario:
        SELECT table_name FROM user_tables;

17. Ajustes para que respete el UTF-8 del lenguaje de la BD:
    Desde la terminal bash ejecutamos el siguiente comando:
        echo "export NLS_LANG=AMERICAN_AMERICA.AL32UTF8" >> .bashrc

18. Crear tabla referenciada a otra tabla por medio de una FK:
    CREATE TABLE ventas (
        id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        cliente_id NUMBER NOT NULL,
        producto VARCHAR2(100),
        monto NUMBER(10,2),
        fecha_venta DATE DEFAULT SYSDATE,
        CONSTRAINT fk_cliente FOREIGN KEY (cliente_id)
            REFERENCES clientes(id)
    );

****** CONFIGURACIONES EN LINUX PARA TRABAAJAR CON ORACLE ******
19. Comando para agregar el grupo de instaladores de oracle en nuestro Linux:
        groupadd -g 54000 oinstall

20. Comando para agregar el grupo de Administradores de Oracle, que pueden entrar y utilizarlo:
        groupadd -g 54001 dba

20. Comando para agregar el grupo de operaciones limitadas como administradores de BD:
        groupadd -g 54002 oper

21. Crear mi usuario de trabajo diario con Oracle (nombre usuario: oracle):
        useradd -g oinstall -G dba,operators oracle
        NOTAS: 
    `    - si es modificacion usamos usermod en vez de useradd
         - Para revisar que se hizo correctamente tecleamos el comando
                groups oracle
            y nos tiene que arrojar algo como esto:
                oracle : oinstall dba operators

22. 



